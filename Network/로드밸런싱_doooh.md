## 로드 밸런싱(Load Balancing)

> 둘 이상의 CPU 혹은 저장 장치와 같은 컴퓨터 자원들에게 작업을 나누는 것


![img.png](image/load_balancing.png)

웹사이트에 접속하는 인원이 급격히 늘어나면서 사람들에 대한 모든 트래픽을 감당하기에는 1대의 서버로 부족하다.  
이에 대한 대응 방안으로 하드웨어 성능을 올리거나(`Scale-Up`) 여러 대의 서버가 나눠서 일하도록 만드는 것 (`Scale-out`) 이 있다.  

- 하드웨어 고가의 비용
- 반면 여러대의 서버의 경우, 무중단 서비스 환경 구성 편리 및 용이   

= **Scale-out** 효과적  



### 로드 밸런싱
로드 밸런싱은 분산식 웹서비스로, 여러 서버에 부하(Load) 를 나누어주는 역할을 한다.  
<U>로드 밸런서는 클라이언트와 서버 사이에 두며,  
부하가 일어나지 않도록 여러 서버에 분산 시켜주는 방식으로 동작한다.</U>



### 로드 밸런서가 서버를 선택하는 방식

- **라운드 로빈(Round Robin)** : CPU 스케줄링의 라운드 로빈 방식 활용
- **Least Connections** : 연결 개수가 가장 작은 서버 선택 (트래픽으로 인해 세션이 길어지는 경우 권장)
- **Source** : 사용자 IP를 해싱하여 분배 (특정 사용자가 항상 같은 서버로 연결되는 것 보장)


### 로드 밸런서 장애 대비
로드 밸런서가 이상이 생길 수 있으므로 로드 밸런서를 이중화하여 대비한다.
> Active 상태와 Passive 상태

- 두 로드 밸런서들은 서로를 Health Check한다.
- 메인 로드 밸런서가 동작하지 않으면 가상 IP(VIP, Virtual IP)는 여분의 Load Balancer로 변경된다.
- 여분의 로드 밸런서로 운영하게 된다.
